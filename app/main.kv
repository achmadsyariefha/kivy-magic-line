#:kivy 2.0.0
#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import BackgroundColorBehavior kivymd.uix.behaviors.backgroundcolor_behavior

<RootScreen>
    transition: NoTransition()
    StartScreen:
    GameScreen:
    SettingsScreen:

<StartScreen>
    name: "start"
    FitImage:
        source: 'resources/img/bg.png'
    # background: 'resources/img/bg.png'
    # md_bg_color: 0, 1, 0, 1
    # canvas.before:
    #     Rectangle:
    #         pos:self.pos
    #         size:self.size
    #         source: 'resources/img/bg.png'

    MDBoxLayout:
        orientation:'vertical'

        AnchorLayout:
            size_hint: 1, 0.5
            anchor_x: 'center'
            anchor_y: 'top'
            padding: 25

            MDBoxLayout:
                orientation: 'vertical'

                MDLabel:
                    text: "Magic Line"
                    halign: "center"
                    font_style: 'H3'

        AnchorLayout:
            size_hint: 1, 0.5
            anchor_x: 'center'
            anchor_y: 'bottom'
            padding: 25

            MDBoxLayout:
                orientation: 'vertical'
                spacing: 1

                MDFillRoundFlatButton:
                    text: "Start"
                    md_bg_color: 0, 0, 0, 1
                    on_press:
                        root.manager.transition.direction = 'left'
                        root.manager.transition.duration = 0.1
                        root.manager.current = "game"
                    size: self.width, 50
                    size_hint: .75, None
                    pos_hint: {'center_x':.5, 'center_y':.5}

                MDFillRoundFlatButton:
                    text: "Settings"
                    md_bg_color: 0, 0, 0, 1
                    on_press:
                        root.manager.transition.direction = 'left'
                        root.manager.transition.duration = 0.1
                        root.manager.current = "settings"
                    size: self.width, 50
                    size_hint: .75, None
                    pos_hint: {'center_x':.5, 'center_y':.5}

                MDFillRoundFlatButton:
                    text: "Exit"
                    md_bg_color: 0, 0, 0, 1
                    on_press:
                        app.show_exit_dialog()
                    size: self.width, 50
                    size_hint: .75, None
                    pos_hint: {'center_x':.5, 'center_y':.5}            

<GameScreen>
    name:"game"
    FitImage:
        source: 'resources/img/bg.png'
    # md_bg_color: 0, 0, 0, 1
    # background: 'resources/img/bg.png'
    # canvas:
    #     Rectangle:
    #         pos:self.pos
    #         size:self.size
    #         source: 'resources/img/bg.png'

    MDBoxLayout:
        size: 50, 50
        size_hint: .9, .6
        orientation: 'horizontal'
        pos_hint: {'center_y':.5, 'center_x':.5}
        FitImage:
            source: 'resources/img/Board2.png'   

    MDBoxLayout:
        MDFillRoundFlatButton:
            text: "Back"
            md_bg_color: 0, 0, 1, 1
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.transition.duration = 0.1
                root.manager.current = "start"
            size: self.width, 50
            size_hint: 1, None
            pos_hint: {'bottom':1}

<SettingsScreen>
    name:"settings"
    FitImage:
        source: 'resources/img/bg.png'
    MDGridLayout:
        adaptive_height: True
        size_hint: .9, .6
        pos_hint: {'center_y':.5, 'center_x':.5}
        md_bg_color: 1, 1, 1, 1
        cols: 2
        rows: 3
        padding: 20, 10, 30, 20
        spacing: 50, 30
        MDLabel:
            name:"bgm"
            text: "BGM"
            font_style: "H6"
            halign: "left"
            valign: "center"
            adaptive_width: True
            adaptive_height: True
        MDBoxLayout:
            padding: 30, 30, 0, 0
            valign: "top"
            halign: "right"
            adaptive_height: True
            adaptive_size: True
            MDSwitch:
                pos_hint: {'center_y':.5, 'center_x':.5}
                adaptive_height: True
        MDLabel:
            name:"sfx"
            text: "SFX"
            font_style: "H6"
            halign: "left"
            valign: "center"
            adaptive_width: True
            adaptive_height: True
        MDBoxLayout:
            padding: 30, 30, 0, 0
            valign: "top"
            halign: "right"
            adaptive_height: True
            adaptive_size: True
            MDSwitch:
                pos_hint: {'center_y':.5, 'center_x':.5}
                adaptive_height: True
        MDLabel:
            name:"difficulty"
            text: "Difficulty"
            font_style: "H6"
            halign: "left"
            valign: "center"
            adaptive_width: True
            adaptive_height: True
        MDBoxLayout:
            padding: 30, 30, 0, 0
            valign: "top"
            halign: "right"
            adaptive_height: True
            adaptive_size: True
            MDSwitch:
                pos_hint: {'center_y':.5, 'center_x':.5}
                adaptive_height: True
    MDBoxLayout:
        MDFillRoundFlatButton:
            text: "Back"
            md_bg_color: 0, 0, 1, 1
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.transition.duration = 0.1
                root.manager.current = "start"
            size: self.width, 50
            size_hint: 1, None
            pos_hint: {'bottom':1}