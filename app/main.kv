#:kivy 2.0.0
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import BackgroundColorBehavior kivymd.uix.behaviors.backgroundcolor_behavior

<RootScreen>
    transition: SlideTransition()
    StartScreen:
    GameScreen:
    SettingsScreen:

<StartScreen>
    name: "start"
    FitImage:
        source: 'resources/img/bg.png'
    # background: 'resources/img/bg.png'
    # md_bg_color: 0, 1, 0, 1
    # canvas.before:
    #     Rectangle:
    #         pos:self.pos
    #         size:self.size
    #         source: 'resources/img/bg.png'

    MDBoxLayout:
        orientation:'vertical'

        AnchorLayout:
            size_hint: 1, 0.5
            anchor_x: 'center'
            anchor_y: 'top'
            padding: 25, 50, 25, 25

            MDBoxLayout:
                orientation: 'vertical'

                MDLabel:
                    text: "Magic Line"
                    halign: "center"
                    font_style: 'H3'

        AnchorLayout:
            size_hint: 1, 0.5
            anchor_x: 'center'
            anchor_y: 'bottom'
            padding: 25, 25, 25, 50

            MDBoxLayout:
                orientation: 'vertical'
                spacing: 1

                MDFillRoundFlatButton:
                    text: "Start"
                    md_bg_color: 0, 0, 0, 1
                    on_press:
                        root.manager.transition.direction = 'left'
                        root.manager.transition.duration = 0.1
                        root.manager.current = "game"
                    size: self.width, 50
                    size_hint: .75, None
                    pos_hint: {'center_x':.5, 'center_y':.5}

                MDFillRoundFlatButton:
                    text: "Settings"
                    md_bg_color: 0, 0, 0, 1
                    on_press:
                        root.manager.transition.direction = 'left'
                        root.manager.transition.duration = 0.1
                        root.manager.current = "settings"
                    size: self.width, 50
                    size_hint: .75, None
                    pos_hint: {'center_x':.5, 'center_y':.5}

                MDFillRoundFlatButton:
                    text: "Exit"
                    md_bg_color: 0, 0, 0, 1
                    on_press:
                        app.show_exit_dialog()
                    size: self.width, 50
                    size_hint: .75, None
                    pos_hint: {'center_x':.5, 'center_y':.5}            

<GameScreen>
    name:"game"
    FitImage:
        source: 'resources/img/bg.png'
    
    MDBoxLayout:
        orientation: 'vertical'

        AnchorLayout:
            size_hint: 1, 0.3
            anchor_x: 'center'
            anchor_y: 'top'

            MDToolbar:
                title: "Magic Line"
                left_action_items: [["arrow-left", lambda x: root.set_screen()]]

            # MDFillRoundFlatButton:
            #     text: "Back"
            #     md_bg_color: 0, 0, 1, 1
            #     on_press:
            #         root.manager.transition.direction = 'left'
            #         root.manager.transition.duration = 0.1
            #         root.manager.current = "start"
            #     size: self.width, 50
            #     size_hint: 1, None

        AnchorLayout:
            size_hint: 1, 0.7
            anchor_x: 'center'
            anchor_y: 'top'

            MDBoxLayout:
                # size: 60, 60
                size_hint: .9, .86
                orientation: 'horizontal'
                pos_hint: {'center_y':.5, 'center_x':.5}
                FitImage:
                    source: 'resources/img/Board2.png'

<SettingsScreen>
    name:"settings"
    FitImage:
        source: 'resources/img/bg.png'
    
    MDBoxLayout:
        orientation: "vertical"

        AnchorLayout:
            size_hint: 1, 0.25
            anchor_x: 'center'
            anchor_y: 'top'

            MDToolbar:
                title: "Settings"
                left_action_items: [["arrow-left", lambda x: root.set_screen()]]

        AnchorLayout:
            size_hint: 1, 0.75
            anchor_x: 'center'
            anchor_y: 'center'
            padding: 25, 0, 25, 75

            MDBoxLayout:
                md_bg_color: 1, 1, 1, 1
                orientation: 'vertical'
                padding: 25, 0, 25, 0

                MDBoxLayout:
                    orientation: 'horizontal'

                    MDBoxLayout:
                        orientation: 'vertical'

                        MDLabel:
                            text: "BGM"

                        MDLabel:
                            text: "SFX"

                        MDLabel:
                            text:"Diffculty"
                    
                    MDBoxLayout:
                        orientation: 'vertical'

                        MDSlider:
                            id: bgm_slider
                            min: 0
                            max: 100
                            value: 50

                        MDSlider:
                            id: sfx_slider
                            min: 0
                            max: 100
                            value: 50

                        MDBoxLayout:
                            id: game_difficulty
                            orientation: 'horizontal'
                            padding: 0, 0, 0, 25

                            MDBoxLayout:
                                orientation: 'vertical'
                                padding: 0, 25, 0, 0
                                spacing: 5
                        
                                MDCheckbox:
                                    size_hint: 1, 0.2
                                    size: "24dp", "28dp"
                                    # pos_hint: {'center_y':.5, 'center_x':.5}
                                    on_active: app.on_checkbox_active(*args)
                                    active: True

                                MDCheckbox:
                                    size_hint: 1, 0.2
                                    size: "24dp", "28dp"
                                    on_active: app.on_checkbox_active(*args)
                                    # pos_hint: {'center_y':.5, 'center_x':.5}

                                MDCheckbox:
                                    size_hint: 1, 0.2
                                    size: "24dp", "28dp"
                                    on_active: app.on_checkbox_active(*args)
                                    # pos_hint: {'center_y':.5, 'center_x':.5}
                            
                            MDBoxLayout:
                                orientation: 'vertical'
                                padding: 0, 50, 0, 10
                                spacing: 28

                                MDLabel:
                                    text: "Easy"

                                MDLabel:
                                    text: "Medium"

                                MDLabel:
                                    text:"Hard"

